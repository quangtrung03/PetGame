================================================================================
                    PET GAME - TÃ€I LIá»†U CHI TIáº¾T CHá»¨C NÄ‚NG Há»† THá»NG
================================================================================

ğŸ“… NgÃ y cáº­p nháº­t: 2 thÃ¡ng 9, 2025
ğŸ¯ PhiÃªn báº£n: 1.0.0 
ğŸ—ï¸ Kiáº¿n trÃºc: MERN Stack (MongoDB, Express.js, React, Node.js)

================================================================================
1. Tá»”NG QUAN Há»† THá»NG
================================================================================

Pet Game lÃ  má»™t á»©ng dá»¥ng web cho phÃ©p ngÆ°á»i dÃ¹ng nuÃ´i vÃ  chÄƒm sÃ³c thÃº cÆ°ng áº£o. 
Há»‡ thá»‘ng bao gá»“m cÃ¡c module chÃ­nh:

ğŸ” Authentication & User Management
ğŸ¾ Pet Management System  
ğŸ›’ Shop & Inventory System
ğŸ® Mini Games & Activities
ğŸ“‹ Daily Missions System
ğŸ‘¥ Friends & Social Features
ğŸ† Achievement System
ğŸ’° Economic System

================================================================================
2. KIáº¾N TRÃšC Há»† THá»NG
================================================================================

2.1 BACKEND (Node.js + Express.js)
----------------------------------
ğŸ“ Structure:
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js              # Main server file
â”‚   â”œâ”€â”€ config/db.js           # MongoDB connection
â”‚   â”œâ”€â”€ models/                # Mongoose schemas
â”‚   â”‚   â”œâ”€â”€ User.js           # User data model  
â”‚   â”‚   â”œâ”€â”€ Pet.js            # Pet data model
â”‚   â”‚   â”œâ”€â”€ Item.js           # Shop items model
â”‚   â”‚   â”œâ”€â”€ Inventory.js      # User inventory model
â”‚   â”‚   â”œâ”€â”€ DailyMission.js   # Daily missions model
â”‚   â”‚   â””â”€â”€ Achievement.js    # Achievements model
â”‚   â”œâ”€â”€ controllers/          # Business logic
â”‚   â”‚   â”œâ”€â”€ authController.js 
â”‚   â”‚   â”œâ”€â”€ petController.js
â”‚   â”‚   â”œâ”€â”€ shopController.js
â”‚   â”‚   â”œâ”€â”€ gameController.js
â”‚   â”‚   â”œâ”€â”€ dailyMissionController.js
â”‚   â”‚   â”œâ”€â”€ friendController.js
â”‚   â”‚   â””â”€â”€ achievementController.js
â”‚   â”œâ”€â”€ routes/               # API endpoints
â”‚   â”œâ”€â”€ middleware/           # Authentication & validation
â”‚   â””â”€â”€ services/             # Helper services
â”‚       â”œâ”€â”€ economicService.js    # Economic balance
â”‚       â”œâ”€â”€ abilityService.js     # Pet abilities
â”‚       â”œâ”€â”€ cacheService.js       # Performance optimization
â”‚       â””â”€â”€ missionValidationService.js
â””â”€â”€ scripts/
    â””â”€â”€ smoke_tests.ps1       # Comprehensive API testing

2.2 FRONTEND (React 18 + Vite)
-------------------------------
ğŸ“ Structure:
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.jsx               # Main app component
â”‚   â”œâ”€â”€ main.jsx              # Entry point
â”‚   â”œâ”€â”€ components/           # Reusable components
â”‚   â”‚   â”œâ”€â”€ Navbar.jsx       
â”‚   â”‚   â”œâ”€â”€ PetCard.jsx      # Pet display & interactions
â”‚   â”‚   â”œâ”€â”€ ItemInventory.jsx # Inventory management
â”‚   â”‚   â”œâ”€â”€ MemoryGame.jsx   # Mini game component
â”‚   â”‚   â””â”€â”€ Toast.jsx        # Notification system
â”‚   â”œâ”€â”€ pages/               # Route pages
â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”œâ”€â”€ Register.jsx
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”œâ”€â”€ Pets.jsx
â”‚   â”‚   â”œâ”€â”€ Shop.jsx
â”‚   â”‚   â”œâ”€â”€ MiniGames.jsx
â”‚   â”‚   â”œâ”€â”€ DailyMissions.jsx
â”‚   â”‚   â””â”€â”€ Friends.jsx
â”‚   â”œâ”€â”€ context/             # State management
â”‚   â”‚   â”œâ”€â”€ AuthContext.jsx  # User authentication
â”‚   â”‚   â”œâ”€â”€ EconomicContext.jsx # Economic data
â”‚   â”‚   â””â”€â”€ ToastContext.jsx    # Notifications
â”‚   â”œâ”€â”€ api/                 # HTTP client layer
â”‚   â””â”€â”€ utils/               # Helper utilities

================================================================================
3. CÆ  Sá» Dá»® LIá»†U (MongoDB)
================================================================================

3.1 COLLECTION: users
----------------------
LÆ°u trá»¯ thÃ´ng tin ngÆ°á»i dÃ¹ng vÃ  tiáº¿n Ä‘á»™ game:

{
  _id: ObjectId,
  username: String (3-30 chars, unique),
  email: String (unique, lowercase),
  password: String (hashed with bcrypt),
  
  // Game Progress
  coins: Number (default: 100),
  level: Number (default: 1),
  xp: Number (default: 0),
  dailyLoginStreak: Number (default: 0),
  lastLogin: Date,
  
  // References
  pets: [ObjectId] (ref: Pet),
  achievements: [ObjectId] (ref: Achievement),
  friends: [ObjectId] (ref: User),
  friendRequests: [ObjectId] (ref: User),
  
  // Economic Tracking
  actionCooldowns: {
    feed: Date,
    play: Date,
    ability: Date,
    dailyLogin: Date,
    minigame: Date
  },
  purchaseHistory: {
    food: Number (default: 0),
    toys: Number (default: 0),
    total: Number (default: 0)
  },
  dailyStats: {
    coinsEarned: Number (default: 0),
    coinsSpent: Number (default: 0),
    lastReset: Date
  },
  
  // Daily Missions Progress
  dailyMissions: [{
    missionCode: String,
    currentProgress: Number (default: 0),
    completed: Boolean (default: false),
    claimed: Boolean (default: false),
    date: Date
  }],
  
  timestamps: { createdAt, updatedAt }
}

3.2 COLLECTION: pets
--------------------
LÆ°u trá»¯ thÃ´ng tin thÃº cÆ°ng:

{
  _id: ObjectId,
  name: String (max 50 chars),
  type: String (enum: ['cat', 'dog', 'rabbit', 'bird', 'fish']),
  
  // Status
  hunger: Number (0-100, default: 50),
  happiness: Number (0-100, default: 50),
  level: Number (default: 1),
  xp: Number (default: 0),
  
  // Activity Tracking
  lastFed: Date,
  lastPlayed: Date,
  playCount: Number (default: 0),
  feedCount: Number (default: 0),
  
  // Special Features
  abilities: [String] (pet-specific skills),
  
  // Ownership
  owner: ObjectId (ref: User),
  
  timestamps: { createdAt, updatedAt }
}

3.3 COLLECTION: items
---------------------
Cá»­a hÃ ng vÃ  váº­t pháº©m:

{
  _id: ObjectId,
  name: String,
  type: String (enum: ['food', 'toy', 'accessory']),
  category: String (enum: ['basic', 'premium', 'special']),
  price: Number (min: 1),
  
  // Effects
  effects: {
    hunger: Number (default: 0),
    happiness: Number (default: 0), 
    xp: Number (default: 0)
  },
  
  // Compatibility
  petTypes: [String] (compatible pet types or 'all'),
  
  // Display
  icon: String,
  description: String,
  isAvailable: Boolean (default: true),
  
  timestamps: { createdAt, updatedAt }
}

3.4 COLLECTION: dailymissions
-----------------------------
Nhiá»‡m vá»¥ hÃ ng ngÃ y:

{
  _id: ObjectId,
  code: String (unique identifier),
  description: String,
  type: String (enum: ['feed', 'play', 'login', 'purchase', 'ability', 'minigame']),
  targetProgress: Number (default: 1),
  
  // Rewards
  reward: {
    coins: Number (default: 0),
    xp: Number (default: 0),
    item: String (optional),
    achievement: String (optional)
  },
  
  active: Boolean (default: true),
  expiresAt: Date (24h from creation),
  
  timestamps: { createdAt, updatedAt }
}

================================================================================
4. Há»† THá»NG XÃC THá»°C (AUTHENTICATION)
================================================================================

4.1 REGISTRATION FLOW
----------------------
ğŸ”¸ Endpoint: POST /api/auth/register
ğŸ”¸ Input: { username, email, password }
ğŸ”¸ Validation:
  - Username: 3-20 chars, alphanumeric + underscore/hyphen only
  - Email: Valid email format, max 100 chars
  - Password: 6-128 chars, must contain uppercase, lowercase, number
ğŸ”¸ Process:
  1. Check username/email uniqueness
  2. Hash password with bcrypt (salt rounds: 10)
  3. Create user with default values (100 coins, level 1)
  4. Generate JWT token (7 days expiry)
ğŸ”¸ Response: { success, message, data: { user, token } }

4.2 LOGIN FLOW
---------------
ğŸ”¸ Endpoint: POST /api/auth/login
ğŸ”¸ Input: { email, password }
ğŸ”¸ Process:
  1. Find user by email
  2. Compare password with bcrypt
  3. Calculate daily login bonus:
     - Base: 50 coins
     - Streak multiplier: 1.2x - 2.4x (max 7 days)
     - Reset if not consecutive day
  4. Generate JWT token
ğŸ”¸ Response: { success, message, data: { user, token, dailyReward, streak } }

4.3 JWT TOKEN SYSTEM
--------------------
ğŸ”¸ Secret: Stored in .env (JWT_SECRET)
ğŸ”¸ Expiry: 7 days (configurable)
ğŸ”¸ Payload: { id: userId }
ğŸ”¸ Usage: Bearer token in Authorization header
ğŸ”¸ Middleware: auth.js validates token for protected routes

================================================================================
5. Há»† THá»NG QUáº¢N LÃ PET
================================================================================

5.1 PET CREATION
----------------
ğŸ”¸ Endpoint: POST /api/pets
ğŸ”¸ Input: { name, type }
ğŸ”¸ Available Types: cat, dog, rabbit, bird, fish
ğŸ”¸ Default Stats: hunger=50, happiness=50, level=1, xp=0
ğŸ”¸ Abilities Assignment:
  - Cat: ['Heal', 'Lucky']
  - Dog: ['Guard', 'Fetch'] 
  - Rabbit: ['Speed Up', 'Double Feed']
  - Bird: ['Sing', 'Scout']
  - Fish: ['Splash', 'Treasure']

5.2 PET INTERACTIONS
--------------------

FEEDING SYSTEM:
ğŸ”¸ Endpoint: PATCH /api/pets/:id/feed
ğŸ”¸ Cooldown: 5 minutes
ğŸ”¸ Effects:
  - Hunger: +20 (max 100)
  - Happiness: +10 (max 100)
  - XP: +10
  - Coins (to user): +5 (base) Ã— level multiplier
ğŸ”¸ Economic Balance: Prevents spam with cooldown
ğŸ”¸ Mission Tracking: Updates 'feed' missions automatically

PLAYING SYSTEM:
ğŸ”¸ Endpoint: PATCH /api/pets/:id/play
ğŸ”¸ Cooldown: 10 minutes
ğŸ”¸ Effects:
  - Happiness: +20 (max 100)
  - Hunger: -5 (prevents exploiting)
  - XP: +15
  - Coins (to user): +8 (base) Ã— level multiplier
ğŸ”¸ Mission Tracking: Updates 'play' missions

ABILITY SYSTEM:
ğŸ”¸ Endpoint: POST /api/pets/:id/use-ability
ğŸ”¸ Input: { ability }
ğŸ”¸ Cooldown: 15 minutes
ğŸ”¸ Effects (varies by ability):
  - Heal: happiness +20
  - Lucky: bonus coins +10
  - Guard: reduced hunger decay
  - Fetch: bonus coins +5
  - Speed Up: bonus XP +15
  - Double Feed: hunger +30
  - Sing: happiness boost to all pets
  - Scout: exploration bonus
  - Splash: hunger +20
  - Treasure: bonus coins +20
ğŸ”¸ Coins Reward: +10 (base) Ã— level multiplier

5.3 LEVEL SYSTEM
----------------
ğŸ”¸ XP Required: level Ã— 100 (100, 200, 300, ...)
ğŸ”¸ Level Up Benefits:
  - Increased coin rewards from activities
  - Access to new abilities (planned)
  - Status symbol
ğŸ”¸ Auto-level up when XP threshold reached
ğŸ”¸ XP sources: feeding (+10), playing (+15), abilities (varies)

5.4 STATUS DECAY SYSTEM
-----------------------
ğŸ”¸ Hunger Decay: -5 per hour since last fed
ğŸ”¸ Happiness Decay: -3 per hour since last played
ğŸ”¸ Auto-calculated when pet accessed
ğŸ”¸ Status Levels:
  - Great (70-100): Green, "Tuyá»‡t vá»i!"
  - Good (40-69): Yellow, "BÃ¬nh thÆ°á»ng"
  - Poor (0-39): Red, "Cáº§n chÄƒm sÃ³c!"

================================================================================
6. Há»† THá»NG SHOP & INVENTORY
================================================================================

6.1 SHOP ITEMS
---------------
ğŸ”¸ Endpoint: GET /api/shop/items
ğŸ”¸ Categories:
  - Basic: Lower cost, moderate effects
  - Premium: Higher cost, better effects  
  - Special: Expensive, powerful effects
ğŸ”¸ Types:
  - Food: Restores hunger, some give happiness
  - Toy: Increases happiness, some give XP
  - Accessory: Cosmetic or special effects
ğŸ”¸ Pet Compatibility: Items can be for specific pet types or all

6.2 PURCHASE SYSTEM
-------------------
ğŸ”¸ Endpoint: POST /api/shop/buy
ğŸ”¸ Input: { itemId, quantity }
ğŸ”¸ Validation Process:
  1. Check item availability
  2. Calculate dynamic pricing (inflation if spam buying)
  3. Validate user has enough coins
  4. Apply purchase limits (if any)
ğŸ”¸ Economic Features:
  - Purchase history tracking
  - Dynamic pricing to prevent abuse
  - Daily spending limits
ğŸ”¸ Mission Integration: Updates purchase-related missions

6.3 INVENTORY MANAGEMENT
------------------------
ğŸ”¸ Endpoint: GET /api/shop/inventory
ğŸ”¸ Storage: Inventory collection (user + item + quantity)
ğŸ”¸ Stacking: Same items stack with quantity counter
ğŸ”¸ Usage: POST /api/shop/inventory/use
ğŸ”¸ Usage Process:
  1. Check item ownership
  2. Verify pet compatibility (if pet-specific)
  3. Apply item effects to pet
  4. Reduce quantity (remove if 0)
  5. Update pet stats and save

================================================================================
7. Há»† THá»NG MINI GAMES
================================================================================

7.1 MEMORY GAME
---------------
ğŸ”¸ Endpoint: POST /api/games/memory-result
ğŸ”¸ Input: { score, timeCompleted, difficulty }
ğŸ”¸ Difficulties: easy, medium, hard
ğŸ”¸ Cooldown: 5 minutes
ğŸ”¸ Reward Calculation:
  - Base: 15 coins
  - Difficulty multiplier: easy(1x), medium(1.5x), hard(2x)
  - Score bonus: 50+(1.2x), 70+(1.5x), 90+(2x)
  - Speed bonus: <30s(1.5x), <60s(1.2x)
ğŸ”¸ Win Condition: Score â‰¥ 50
ğŸ”¸ Mission Integration: Updates minigame missions

7.2 DAILY BONUS
---------------
ğŸ”¸ Endpoint: POST /api/games/daily-bonus
ğŸ”¸ Cooldown: 24 hours
ğŸ”¸ Reward Calculation:
  - Base: 50 coins (from INCOME_CONFIG)
  - Streak bonus: 1.2x to 2.4x (max 7 days)
  - Streak tracking: Resets if missed day
ğŸ”¸ Automatic on login, can claim manually

7.3 ECONOMIC STATS
------------------
ğŸ”¸ Endpoint: GET /api/games/economic-stats
ğŸ”¸ Returns:
  - Current coins, level, XP
  - Daily stats (earned/spent)
  - Cooldown timers for all activities
  - Economic balance indicators

================================================================================
8. Há»† THá»NG DAILY MISSIONS
================================================================================

8.1 MISSION TYPES
-----------------
ğŸ”¸ Feed Missions: "Cho pet Äƒn X láº§n"
ğŸ”¸ Play Missions: "ChÆ¡i vá»›i pet X láº§n"
ğŸ”¸ Login Missions: "ÄÄƒng nháº­p hÃ ng ngÃ y"
ğŸ”¸ Purchase Missions: "Mua X váº­t pháº©m"
ğŸ”¸ Ability Missions: "Sá»­ dá»¥ng ká»¹ nÄƒng X láº§n"
ğŸ”¸ Minigame Missions: "Tháº¯ng X game"

8.2 MISSION FLOW
----------------
ğŸ”¸ Get Missions: GET /api/daily-missions
ğŸ”¸ Progress Tracking: Automatic via MissionValidationService
ğŸ”¸ Completion Logic:
  1. Action performed (feed, play, etc.)
  2. Service checks matching missions
  3. Updates progress for user's dailyMissions array
  4. Marks completed when target reached
  5. Auto-applies coins/XP on completion
ğŸ”¸ Claim Rewards: POST /api/daily-missions/claim
ğŸ”¸ Manual Completion: POST /api/daily-missions/complete

8.3 REWARD SYSTEM
-----------------
ğŸ”¸ Types: coins, XP, items, achievements
ğŸ”¸ Auto-grant: Coins and XP added automatically on completion
ğŸ”¸ Claimed flag: Prevents double-claiming
ğŸ”¸ Daily reset: Missions reset at midnight

================================================================================
9. Há»† THá»NG Báº N BÃˆ (FRIENDS)
================================================================================

9.1 USER SEARCH
---------------
ğŸ”¸ Endpoint: GET /api/friends/search?q=username
ğŸ”¸ Search: Case-insensitive username matching
ğŸ”¸ Returns: username and email only (privacy)

9.2 FRIEND REQUEST FLOW
-----------------------
ğŸ”¸ Send Request: POST /api/friends/send { userId }
ğŸ”¸ Process:
  1. Check if user exists
  2. Prevent duplicate requests
  3. Add to target user's friendRequests array
ğŸ”¸ Accept Request: POST /api/friends/accept { userId }
ğŸ”¸ Process:
  1. Remove from friendRequests
  2. Add to both users' friends arrays
ğŸ”¸ Decline Request: POST /api/friends/decline { userId }

9.3 FRIENDS LIST
----------------
ğŸ”¸ Get Friends: GET /api/friends/list
ğŸ”¸ Get Requests: GET /api/friends/requests
ğŸ”¸ Populated Data: Returns username and email of friends
ğŸ”¸ Future Features: Visit friends' pets, send gifts

================================================================================
10. Há»† THá»NG THÃ€NH TÃCH (ACHIEVEMENTS)
================================================================================

10.1 ACHIEVEMENT TYPES
----------------------
ğŸ”¸ First Pet: Create your first pet
ğŸ”¸ Pet Lover: Own multiple pets
ğŸ”¸ Caretaker: Feed pets many times
ğŸ”¸ Player: Play with pets many times
ğŸ”¸ Rich: Accumulate lots of coins
ğŸ”¸ Social: Make friends
ğŸ”¸ Dedicated: Login streak achievements

10.2 UNLOCK SYSTEM
------------------
ğŸ”¸ Get All: GET /api/achievements
ğŸ”¸ Get User's: GET /api/achievements/user
ğŸ”¸ Unlock: POST /api/achievements/unlock { achievementId }
ğŸ”¸ Auto-unlock: AchievementService checks conditions
ğŸ”¸ Rewards: Coins, XP, special items, titles

================================================================================
11. Há»† THá»NG KINH Táº¾ (ECONOMIC SYSTEM)
================================================================================

11.1 INCOME SOURCES
-------------------
ğŸ”¸ Pet Activities:
  - Feed: 5 coins (5 min cooldown)
  - Play: 8 coins (10 min cooldown)  
  - Ability: 10 coins (15 min cooldown)
ğŸ”¸ Daily Activities:
  - Login: 50 coins (24h cooldown, streak bonus)
  - Mini Game: 15 coins (5 min cooldown, performance bonus)
ğŸ”¸ Achievements: 100 coins (one-time)
ğŸ”¸ Level Multiplier: +10% per pet level

11.2 EXPENSE SOURCES
--------------------
ğŸ”¸ Shop Items:
  - Basic: 10-30 coins
  - Premium: 50-80 coins
  - Special: 100-200 coins
ğŸ”¸ Future Features:
  - Pet upgrades
  - Cosmetics
  - Special abilities

11.3 BALANCE MECHANISMS
-----------------------
ğŸ”¸ Cooldowns: Prevent infinite farming
ğŸ”¸ Dynamic Pricing: Increase costs for repeated purchases
ğŸ”¸ Daily Limits: Cap on daily earnings/spending
ğŸ”¸ Inflation Control: Monitor coin supply/demand
ğŸ”¸ Purchase History: Track spending patterns

================================================================================
12. Há»† THá»NG HIá»†U SUáº¤T (PERFORMANCE)
================================================================================

12.1 CACHING SYSTEM
-------------------
ğŸ”¸ Node-cache: In-memory caching for frequent data
ğŸ”¸ Cache Keys:
  - USER_PROFILE(userId): User data
  - USER_PETS(userId): Pet lists
  - SHOP_ITEMS: All shop items
ğŸ”¸ TTL (Time To Live):
  - User profiles: 5 minutes
  - Pet lists: 2 minutes
  - Shop items: 30 minutes
ğŸ”¸ Invalidation: On data updates

12.2 QUERY OPTIMIZATION
-----------------------
ğŸ”¸ Lean Queries: Use .lean() for read-only operations
ğŸ”¸ Field Selection: Only fetch required fields
ğŸ”¸ Aggregation Pipelines: Complex queries optimized
ğŸ”¸ Batch Operations: Multiple updates in single query
ğŸ”¸ Indexes: Optimized database indexes

12.3 PERFORMANCE MONITORING
---------------------------
ğŸ”¸ Response Time Tracking: Monitor endpoint performance
ğŸ”¸ Memory Usage: Track heap usage
ğŸ”¸ Cache Hit Ratio: Monitor cache effectiveness
ğŸ”¸ Health Check: GET /api/health
ğŸ”¸ Performance Stats: GET /api/performance

================================================================================
13. API ENDPOINTS SUMMARY
================================================================================

13.1 AUTHENTICATION
--------------------
POST   /api/auth/register        # Register new user
POST   /api/auth/login           # User login
GET    /api/auth/profile         # Get user profile (protected)

13.2 PET MANAGEMENT
-------------------
GET    /api/pets                 # Get user's pets (protected)
POST   /api/pets                 # Create new pet (protected)
PATCH  /api/pets/:id/feed        # Feed pet (protected)
PATCH  /api/pets/:id/play        # Play with pet (protected)
POST   /api/pets/:id/use-ability # Use pet ability (protected)
DELETE /api/pets/:id             # Delete pet (protected)

13.3 SHOP & INVENTORY
---------------------
GET    /api/shop/items           # Get shop items
POST   /api/shop/buy             # Buy item (protected)
GET    /api/shop/inventory       # Get user inventory (protected)
POST   /api/shop/inventory/use   # Use inventory item (protected)

13.4 GAMES & ACTIVITIES
-----------------------
POST   /api/games/memory-result  # Submit memory game (protected)
POST   /api/games/daily-bonus    # Claim daily bonus (protected)
GET    /api/games/economic-stats # Get economic stats (protected)

13.5 DAILY MISSIONS
-------------------
GET    /api/daily-missions       # Get daily missions (protected)
POST   /api/daily-missions/complete # Complete mission (protected)
POST   /api/daily-missions/claim    # Claim mission reward (protected)

13.6 FRIENDS & SOCIAL
---------------------
GET    /api/friends/search       # Search users (protected)
POST   /api/friends/send         # Send friend request (protected)
POST   /api/friends/accept       # Accept friend request (protected)
POST   /api/friends/decline      # Decline friend request (protected)
GET    /api/friends/list         # Get friends list (protected)
GET    /api/friends/requests     # Get friend requests (protected)

13.7 ACHIEVEMENTS
-----------------
GET    /api/achievements         # Get all achievements
GET    /api/achievements/user    # Get user achievements (protected)
POST   /api/achievements/unlock  # Unlock achievement (protected)

13.8 SYSTEM
-----------
GET    /api/health               # Health check
GET    /api/performance          # Performance stats

================================================================================
14. FRONTEND FEATURES
================================================================================

14.1 ROUTING SYSTEM
-------------------
ğŸ”¸ React Router: Client-side routing
ğŸ”¸ Lazy Loading: Code splitting for performance
ğŸ”¸ Protected Routes: Authentication required
ğŸ”¸ Error Boundaries: Graceful error handling

Routes:
/ (Home) - Landing page
/login - User login
/register - User registration  
/dashboard - Main dashboard (protected)
/pets - Pet management (protected)
/shop - Item shop (protected)
/daily-missions - Daily missions (protected)
/friends - Friends system (protected)
/minigames - Mini games (protected)

14.2 STATE MANAGEMENT
---------------------
ğŸ”¸ React Context API: Global state management
ğŸ”¸ AuthContext: User authentication state
ğŸ”¸ EconomicContext: Economic data (coins, stats)
ğŸ”¸ ToastContext: Notification system
ğŸ”¸ Local State: Component-specific state with useState/useEffect

14.3 UI COMPONENTS
------------------
ğŸ”¸ PetCard: Pet display with status bars and action buttons
ğŸ”¸ ItemInventory: Inventory management interface
ğŸ”¸ MemoryGame: Interactive memory game
ğŸ”¸ Toast Notifications: User feedback system
ğŸ”¸ Navbar: Navigation with user info
ğŸ”¸ Loading States: Spinners and skeletons
ğŸ”¸ Error Handling: Error boundaries and fallbacks

14.4 STYLING SYSTEM
-------------------
ğŸ”¸ TailwindCSS: Utility-first CSS framework
ğŸ”¸ Responsive Design: Mobile-first approach
ğŸ”¸ Color Scheme: Green/blue theme for pet game
ğŸ”¸ Animations: Smooth transitions and hover effects
ğŸ”¸ Icons: Unicode emojis for pet-related UI

================================================================================
15. SECURITY FEATURES
================================================================================

15.1 AUTHENTICATION SECURITY
-----------------------------
ğŸ”¸ Password Hashing: bcrypt with salt rounds
ğŸ”¸ JWT Tokens: Secure token-based authentication
ğŸ”¸ Input Validation: Comprehensive server-side validation
ğŸ”¸ XSS Prevention: Input sanitization
ğŸ”¸ Rate Limiting: API request throttling

15.2 DATA VALIDATION
--------------------
ğŸ”¸ Server-side Validation: All inputs validated on backend
ğŸ”¸ Mongoose Schemas: Database-level validation
ğŸ”¸ Client-side Validation: User experience enhancement
ğŸ”¸ CORS Configuration: Controlled cross-origin access
ğŸ”¸ Environment Variables: Sensitive data in .env

15.3 API SECURITY
-----------------
ğŸ”¸ Helmet.js: Security headers
ğŸ”¸ Express Rate Limit: Request throttling
ğŸ”¸ CORS: Cross-origin resource sharing control
ğŸ”¸ JWT Verification: Token validation middleware
ğŸ”¸ Error Handling: No sensitive data exposure

================================================================================
16. TESTING & QUALITY ASSURANCE
================================================================================

16.1 SMOKE TESTING
------------------
ğŸ”¸ Comprehensive Test Script: backend/scripts/smoke_tests.ps1
ğŸ”¸ Coverage: All API endpoints tested
ğŸ”¸ Test Scenarios:
  - User registration and authentication
  - Pet creation and interactions
  - Shop purchases and inventory usage
  - Mini games and economic activities
  - Daily missions completion
  - Friends system workflow
  - Achievement unlocking
  - Cleanup and data integrity

16.2 TEST FEATURES
------------------
ğŸ”¸ Automated Testing: PowerShell script for backend
ğŸ”¸ Performance Tracking: Response time monitoring
ğŸ”¸ Error Handling: Comprehensive error catching
ğŸ”¸ Test Reports: Pass/fail statistics
ğŸ”¸ Data Cleanup: Automatic test data removal
ğŸ”¸ Real Workflow Simulation: End-to-end user flows

================================================================================
17. DEPLOYMENT & ENVIRONMENT
================================================================================

17.1 ENVIRONMENT CONFIGURATION
------------------------------
ğŸ”¸ Development: Local MongoDB + Node.js + React dev server
ğŸ”¸ Production Ready: Configured for cloud deployment
ğŸ”¸ Environment Variables:
  - MONGODB_URI: Database connection string
  - JWT_SECRET: Token signing secret
  - JWT_EXPIRE: Token expiration time
  - PORT: Server port (default: 5000)
  - NODE_ENV: Environment mode
  - FRONTEND_URL: CORS configuration

17.2 SCRIPTS & COMMANDS
-----------------------
Backend:
npm start - Production server
npm run dev - Development server (nodemon)

Frontend:  
npm run dev - Development server (Vite)
npm run build - Production build
npm run preview - Preview production build

================================================================================
18. FUTURE ENHANCEMENTS
================================================================================

18.1 PLANNED FEATURES
---------------------
ğŸ”¸ Pet Evolution: Pets evolve after reaching certain levels
ğŸ”¸ Breeding System: Combine pets to create new types
ğŸ”¸ PvP Battles: Pet vs pet combat system
ğŸ”¸ Guilds: Group features for players
ğŸ”¸ Seasonal Events: Limited-time content
ğŸ”¸ Mobile App: React Native version
ğŸ”¸ Real-time Features: WebSocket integration
ğŸ”¸ Advanced Analytics: Player behavior tracking

18.2 TECHNICAL IMPROVEMENTS
---------------------------
ğŸ”¸ Redis Caching: External cache for better performance
ğŸ”¸ Database Sharding: Horizontal scaling
ğŸ”¸ Microservices: Split into smaller services
ğŸ”¸ GraphQL: More efficient API queries
ğŸ”¸ Unit Testing: Comprehensive test coverage
ğŸ”¸ CI/CD Pipeline: Automated deployment
ğŸ”¸ Monitoring: Advanced logging and metrics
ğŸ”¸ Load Balancing: Multiple server instances

================================================================================
19. TROUBLESHOOTING GUIDE
================================================================================

19.1 COMMON BACKEND ISSUES
---------------------------
âŒ Server won't start:
âœ… Check MongoDB connection in .env
âœ… Verify Node.js version compatibility
âœ… Run npm install to update dependencies

âŒ Authentication errors:
âœ… Check JWT_SECRET in .env
âœ… Verify token expiration settings
âœ… Clear browser localStorage if needed

âŒ Database connection issues:
âœ… Verify MONGODB_URI is correct
âœ… Check network connectivity
âœ… Ensure MongoDB Atlas whitelist includes your IP

19.2 COMMON FRONTEND ISSUES
---------------------------
âŒ Frontend won't load:
âœ… Check if backend is running on port 5000
âœ… Verify CORS configuration
âœ… Clear browser cache and cookies

âŒ API requests failing:
âœ… Check network tab for error details
âœ… Verify API endpoints are correct
âœ… Ensure authentication token is valid

âŒ State management issues:
âœ… Check React DevTools
âœ… Verify context providers are wrapping components
âœ… Clear localStorage if authentication is stuck

================================================================================
20. CONCLUSION
================================================================================

Pet Game lÃ  má»™t há»‡ thá»‘ng web application hoÃ n chá»‰nh vá»›i:

âœ… Kiáº¿n trÃºc MERN Stack hiá»‡n Ä‘áº¡i
âœ… Há»‡ thá»‘ng authentication báº£o máº­t vá»›i JWT
âœ… Quáº£n lÃ½ pet vá»›i tÃ­nh nÄƒng tÆ°Æ¡ng tÃ¡c phong phÃº
âœ… Há»‡ thá»‘ng kinh táº¿ cÃ¢n báº±ng vá»›i cooldown vÃ  dynamic pricing
âœ… Mini games vÃ  daily missions Ä‘á»ƒ tÄƒng engagement
âœ… Social features vá»›i friends system
âœ… Performance optimization vá»›i caching vÃ  query optimization
âœ… Comprehensive testing vá»›i automated smoke tests
âœ… Responsive UI vá»›i TailwindCSS
âœ… Error handling vÃ  user experience tá»‘i Æ°u

Há»‡ thá»‘ng Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ cÃ³ thá»ƒ má»Ÿ rá»™ng vÃ  phÃ¡t triá»ƒn thÃªm nhiá»u tÃ­nh nÄƒng
trong tÆ°Æ¡ng lai, vá»›i codebase sáº¡ch sáº½ vÃ  kiáº¿n trÃºc module hÃ³a tá»‘t.

================================================================================
ğŸ“§ LiÃªn há»‡: CÃ³ thá»ƒ Ä‘Æ°á»£c cáº­p nháº­t qua repository GitHub
ğŸ“ˆ PhiÃªn báº£n: 1.0.0 - 2 thÃ¡ng 9, 2025
ğŸ”„ Cáº­p nháº­t: TÃ i liá»‡u sáº½ Ä‘Æ°á»£c cáº­p nháº­t theo phiÃªn báº£n má»›i
================================================================================
